<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <script>
      const getBuckets = (stringNum) => {
        const buckets = [];

        let startingIndex = 1;

        if (stringNum.length % 2 === 0) {
          buckets.push(stringNum.slice(0, 2));
          startingIndex = 2;
        } else buckets.push(stringNum[0]);

        for (let i = startingIndex; i < stringNum.length; i = i + 2) {
          buckets.push(stringNum.slice(i, i + 2));
        }

        return buckets;
      };

      const getCloseSquareRoot = (num, multiplyValue = 0) => {
        let currentIndex = 0;

        for (let i = 0; i < 10; i++) {
          const multiplication = Number(String(multiplyValue) + String(i)) * i;
          console.log(multiplication, multiplyValue + String(i));
          if (num >= multiplication) currentIndex++;
          else break;
        }

        return currentIndex > 0 ? currentIndex - 1 : 0;
      };

      var mySqrt = function (x) {
        x = x.toString();
        let result = "";

        const buckets = getBuckets(x);
        let finalSquareRoot = "";

        let remainder = 0;

        for (let i = 0; i < buckets.length; i++) {
          const passingNumber = Number(buckets[i]) + remainder * 100;
          const doubleOfPreviousResult = finalSquareRoot * 2;

          const squareRoot = getCloseSquareRoot(
            passingNumber,
            doubleOfPreviousResult
          );

          finalSquareRoot += squareRoot;

          remainder =
            passingNumber -
            (String(doubleOfPreviousResult) + String(squareRoot)) * squareRoot;
        }

        return Number(finalSquareRoot);
      };

      console.log(mySqrt(2147395599));
    </script>
  </body>
</html>
